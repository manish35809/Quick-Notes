<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quick Notes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {}
        }
      }
    </script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');
      
      .code-font {
        font-family: 'JetBrains Mono', monospace;
      }
      
      /* Light mode colorful text styles */
      .light-mode-text {
        background: linear-gradient(135deg, 
          #667eea 0%, 
          #764ba2 25%, 
          #f093fb 50%, 
          #f5576c 75%, 
          #4facfe 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        background-size: 200% 200%;
        animation: gradient-shift 8s ease infinite;
      }
      
      @keyframes gradient-shift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      /* Syntax highlighting colors for light mode */
      .syntax-keyword { color: #d73a49; font-weight: 600; }
      .syntax-string { color: #032f62; }
      .syntax-number { color: #005cc5; }
      .syntax-comment { color: #6a737d; font-style: italic; }
      .syntax-function { color: #6f42c1; }
      .syntax-variable { color: #e36209; }
      .syntax-operator { color: #d73a49; }
      .syntax-bracket { color: #586069; }
      
      /* Dark mode syntax colors */
      .dark .syntax-keyword { color: #ff7b72; }
      .dark .syntax-string { color: #a5d6ff; }
      .dark .syntax-number { color: #79c0ff; }
      .dark .syntax-comment { color: #8b949e; }
      .dark .syntax-function { color: #d2a8ff; }
      .dark .syntax-variable { color: #ffa657; }
      .dark .syntax-operator { color: #ff7b72; }
      .dark .syntax-bracket { color: #c9d1d9; }
    </style>
  </head>
  <body class="bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-900 dark:to-gray-800 min-h-screen flex flex-col text-gray-800 dark:text-gray-100 transition-colors duration-300">
    
    <!-- Theme Toggle Button -->
    <div class="fixed top-4 right-4 z-50">
      <button
        id="themeToggle"
        class="p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-700 hover:scale-110"
      >
        <svg id="sunIcon" class="h-6 w-6 text-yellow-500 hidden dark:block" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
        </svg>
        <svg id="moonIcon" class="h-6 w-6 text-gray-700 block dark:hidden" fill="currentColor" viewBox="0 0 20 20">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
        </svg>
      </button>
    </div>

    <div id="notes-container" class="container mx-auto px-4 py-8 max-w-4xl flex-grow space-y-4 mb-24">
      <!-- Notes will be inserted here -->
    </div>
    
    <div class="fixed bottom-0 left-0 right-0 bg-gradient-to-t from-gray-100/95 via-gray-100/90 to-transparent dark:from-gray-900/95 dark:via-gray-900/90 backdrop-blur-2xl">
      <div class="container mx-auto px-6 max-w-4xl py-8">
        <div class="relative flex gap-3 items-center bg-white/60 dark:bg-gray-800/40 p-2 rounded-2xl border border-gray-300/50 dark:border-gray-700/50 shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:shadow-[0_0_15px_rgba(0,0,0,0.2)] hover:shadow-[0_0_25px_rgba(59,130,246,0.2)] transition-all duration-300 transform hover:-translate-y-1 backdrop-blur-md">
          <div class="absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-2xl"></div>
          <textarea
            id="noteInput"
            class="relative flex-grow p-3 bg-transparent border-none focus:ring-0 focus:outline-none resize-none text-gray-800 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 min-h-[44px] z-10 code-font"
            placeholder="Type your note and press Enter to save..."
            rows="1"
          ></textarea>
          <button
            id="addButton"
            class="relative hidden md:hidden bg-gradient-to-r from-blue-600 to-blue-500 text-white px-6 py-2.5 rounded-xl hover:from-blue-500 hover:to-blue-400 transition-all hover:scale-105 hover:shadow-lg hover:shadow-blue-500/20 active:scale-95 z-10"
          >
            <span class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
              Add
            </span>
          </button>
        </div>
      </div>
    </div>

    <script>
      // Theme management
      const themeToggle = document.getElementById('themeToggle');
      const html = document.documentElement;
      
      // Load theme from localStorage or default to dark
      const currentTheme = localStorage.getItem('theme') || 'dark';
      html.classList.toggle('dark', currentTheme === 'dark');
      
      themeToggle.addEventListener('click', () => {
        html.classList.toggle('dark');
        const isDark = html.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });

      // Get elements
      const noteInput = document.getElementById("noteInput");
      const notesContainer = document.getElementById("notes-container");
      const addButton = document.getElementById("addButton");

      // Load notes from memory (no localStorage)
      let notes = [];
      let editingIndex = null;

      // Syntax highlighting function
      function applySyntaxHighlighting(text) {
        // Simple syntax highlighting patterns
        return text
          // Keywords
          .replace(/\b(function|const|let|var|if|else|for|while|return|class|import|export|async|await|try|catch|finally|throw)\b/g, '<span class="syntax-keyword">$1</span>')
          // Strings
          .replace(/(['"`])(.*?)\1/g, '<span class="syntax-string">$1$2$1</span>')
          // Numbers
          .replace(/\b\d+\.?\d*\b/g, '<span class="syntax-number">$&</span>')
          // Comments
          .replace(/(\/\/.*$|\/\*[\s\S]*?\*\/)/gm, '<span class="syntax-comment">$1</span>')
          // Functions
          .replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g, '<span class="syntax-function">$1</span>(')
          // Operators
          .replace(/([+\-*\/=<>!&|]+)/g, '<span class="syntax-operator">$1</span>')
          // Brackets
          .replace(/([{}[\]()])/g, '<span class="syntax-bracket">$1</span>');
      }

      // Auto-resize function for the note input textarea
      function autoResize(textarea) {
        textarea.style.height = "auto";
        textarea.style.height = textarea.scrollHeight + "px";
      }

      // Function to create note element
      function createNoteElement(note, index) {
        const noteDiv = document.createElement("div");
        noteDiv.className = "group bg-white/70 dark:bg-gray-800/50 backdrop-blur rounded-xl border border-gray-300 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-600 transition-all hover:shadow-lg hover:shadow-blue-500/10 relative";

        const buttonsContainer = document.createElement("div");
        buttonsContainer.className = "md:absolute md:top-3 md:right-3 flex flex-wrap gap-2 p-3 md:p-0 justify-end md:opacity-0 md:group-hover:opacity-100 transition-opacity border-b border-gray-200 dark:border-gray-700 md:border-0 w-full";

        // Helper to create buttons with mobile-friendly sizing
        const createButton = (icon, color, hoverColor) => {
          const button = document.createElement("button");
          button.className = `p-2.5 md:p-2 ${color} ${hoverColor} rounded-lg transition-all hover:scale-110`;
          const updatedIcon = icon.replace('class="h-4 w-4"', 'class="h-5 w-5 md:h-4 md:w-4"');
          button.innerHTML = updatedIcon;
          return button;
        };

        const isImportant = note.important;

        // Edit Button
        const editButton = createButton(
          `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>`,
          "text-blue-500 hover:bg-blue-500/20",
          "hover:text-blue-600 dark:hover:text-blue-300"
        );

        // Copy Button
        const copyButton = createButton(
          `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>`,
          "text-green-500 hover:bg-green-500/20",
          "hover:text-green-600 dark:hover:text-green-300"
        );

        // Clear Button
        const clearButton = createButton(
          `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>`,
          "text-red-500 hover:bg-red-500/20",
          "hover:text-red-600 dark:hover:text-red-300"
        );

        // Priority buttons
        const upButton = createButton(
          `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" stroke="currentColor" fill="none">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"/>
         </svg>`,
          "text-yellow-500 hover:bg-yellow-500/20",
          "hover:text-yellow-600 dark:hover:text-yellow-300"
        );

        const downButton = createButton(
          `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" stroke="currentColor" fill="none">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
         </svg>`,
          "text-indigo-500 hover:bg-indigo-500/20",
          "hover:text-indigo-600 dark:hover:text-indigo-300"
        );

        // Star Button
        const starButton = createButton(
          isImportant
            ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                 <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
               </svg>`
            : `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
               </svg>`,
          "hover:bg-yellow-500/20",
          "hover:text-yellow-300"
        );

        if (isImportant) {
          upButton.disabled = true;
          downButton.disabled = true;
          upButton.classList.add("opacity-50", "cursor-not-allowed");
          downButton.classList.add("opacity-50", "cursor-not-allowed");
        }

        const noteContent = document.createElement("div");
        noteContent.className = "whitespace-pre-wrap break-words code-font p-4 pt-4 md:pt-4";
        
        // Apply colorful text in light mode or syntax highlighting
        const isDarkMode = document.documentElement.classList.contains('dark');
        if (!isDarkMode && !note.text.includes('function') && !note.text.includes('const') && !note.text.includes('let')) {
          // For regular text in light mode, apply gradient color
          noteContent.className += " light-mode-text";
          noteContent.textContent = note.text;
        } else {
          // For code-like content or dark mode, apply syntax highlighting
          noteContent.className += " text-gray-800 dark:text-gray-100";
          noteContent.innerHTML = applySyntaxHighlighting(note.text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));
        }

        // Button actions
        editButton.onclick = () => {
          editingIndex = index;
          noteInput.value = note.text;
          autoResize(noteInput);
          noteInput.focus();
        };

        copyButton.onclick = () => {
          navigator.clipboard.writeText(note.text);
          copyButton.classList.add("scale-125");
          setTimeout(() => {
            copyButton.classList.remove("scale-125");
          }, 200);
        };

        clearButton.onclick = () => {
          noteDiv.classList.add("scale-95", "opacity-0");
          setTimeout(() => {
            notes = notes.filter((_, i) => i !== index);
            renderNotes();
          }, 200);
        };

        upButton.onclick = () => {
          if (index > 0) {
            [notes[index], notes[index - 1]] = [notes[index - 1], notes[index]];
            renderNotes();
          }
        };

        downButton.onclick = () => {
          if (index < notes.length - 1) {
            [notes[index], notes[index + 1]] = [notes[index + 1], notes[index]];
            renderNotes();
          }
        };

        starButton.onclick = () => {
          notes[index] = { ...notes[index], important: !notes[index].important };
          notes.sort((a, b) => b.important - a.important);
          renderNotes();
        };

        buttonsContainer.append(editButton, copyButton, clearButton, upButton, downButton, starButton);
        noteDiv.appendChild(buttonsContainer);
        noteDiv.appendChild(noteContent);

        return noteDiv;
      }

      function renderNotes() {
        notesContainer.innerHTML = "";
        notes.forEach((note, index) => {
          notesContainer.appendChild(createNoteElement(note, index));
        });
        
        // Scroll to bottom to show latest note
        setTimeout(() => {
          window.scrollTo({
            top: document.body.scrollHeight,
            behavior: 'smooth'
          });
        }, 100);
      }

      function addOrUpdateNote() {
        const text = noteInput.value.trim();
        if (text) {
          if (editingIndex !== null) {
            notes[editingIndex] = {
              text,
              important: notes[editingIndex]?.important || false,
            };
            editingIndex = null;
          } else {
            notes.push({ text, important: false });
          }
          noteInput.value = "";
          noteInput.style.height = "auto";
          renderNotes();
        }
      }

      noteInput.addEventListener("input", () => {
        autoResize(noteInput);
      });

      noteInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          addOrUpdateNote();
        } else if (e.key === "Escape") {
          editingIndex = null;
          noteInput.value = "";
          noteInput.style.height = "auto";
        }
      });

      addButton.addEventListener("click", addOrUpdateNote);

      const mediaQuery = window.matchMedia("(max-width: 768px)");
      function handleScreenSize(e) {
        addButton.style.display = e.matches ? "block" : "none";
      }
      mediaQuery.addListener(handleScreenSize);
      handleScreenSize(mediaQuery);

      // Initial render and auto-resize
      renderNotes();
      autoResize(noteInput);

      // Re-render when theme changes to update colors
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            renderNotes();
          }
        });
      });
      observer.observe(html, { attributes: true, attributeFilter: ['class'] });
    </script>
  </body>
</html>
